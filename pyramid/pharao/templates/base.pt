<!DOCTYPE html>
<html lang="${request.locale_name}">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="pyramid web application">
    <meta name="author" content="Pharao Project">
    <link rel="shortcut icon" href="${request.static_url('pharao:static/images/pyramid-16x16.png')}">

    <title>Pharao</title>

    <!-- Bootstrap core CSS -->
    <link href="${request.static_url('pharao:static/css/bootstrap.min.css')}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="${request.static_url('pharao:static/css/styles.css')}" rel="stylesheet">

    <link rel="stylesheet" href="${request.static_url('pharao:static/jstree/themes/default/style.min.css')}" type="text/css">
    <script type="text/javascript" src="${request.static_url('pharao:static/js/jquery.min.js')}"></script>
    <script type="text/javascript" src="${request.static_url('pharao:static/jstree/jstree.min.js')}"></script>
    <script type="text/javascript">
    $(document).ready(function()
    {


        var zNodes = [
            {id:1, pid:0, name:"Servers", open:false, icon:"",},
                {id:100, pid:1, name:"Home", src:"/", click: true},

                {id:101, pid:1, name:"PostgreSQL", isParent:true, open:false, icon:"${request.static_url('pharao:static/images/db-16.png')}",},
                <li tal:omit-tag="" tal:repeat="db sgdbs">
                {id:10000, pid:101, name:"${db}", isParent:true, open:false}, </li>

                {id:102, pid:1, name:"MySQL", isParent:true, open:false, icon:"${request.static_url('pharao:static/images/db-16.png')}",},
                <li tal:omit-tag="" tal:repeat="db mysqldbs">
                {id:20000, pid:102, name:"${db}", isParent:true, open:false}, </li>
        ];

        $('#treemenu').jstree({
            'core' : {
                
                "check_callback" : true,

                'data' : [{
                     'text' : 'Servers',
                     'type': 'root',
                     'state' : {
                       'opened' : true,
                       'selected' : true
                     },
                     'children' : [{
                            'text' : 'PostgreSQL',
                            'type' : 'sgbd',
                            'children' : true,
                       },
                       {
                            'text' : 'MySQL',
                            'type' : 'sgbd',
                            'children' : true,
                       },
                     ]
                }],

            },


            "types" : {
                "root" : {
                  "icon" : "${request.static_url('pharao:static/images/server-16.png')}",
                  "valid_children" : ["sgbd"]
                },
                "sgbd" : {
                  "icon" : "${request.static_url('pharao:static/images/db-16.png')}",
                  "valid_children" : ["database",]
                },
                "database" : {
                  "icon" : "${request.static_url('pharao:static/images/db-16.png')}",
                  "valid_children" : []
                }
            },

            "plugins" : ["types"],

        })
        .on('open_node.jstree', function (e, data)
        {
            alert(data.node.text);
        })
        .on('create_node.jstree', function (e, data)
        {
            alert(data.node.text);
        })


    });
    </script>
</head>



<body style="height: 100%;">
    <div class="main-menu">
        <div id="treemenu"></div>
    </div>

    <div>
        <iframe id="body" src="/frame_home">
        </iframe>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="${request.static_url('pharao:static/js/bootstrap.min.js')}"></script>
</body>
</html>